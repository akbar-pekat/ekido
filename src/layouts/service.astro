---
import "../styles/service.css";
import ServiceCard from "../components/serviceCard.astro";
---

<div class="contentMax-service">
  <div class="serviceSection" id="jasakami">
    <div class="container">
      <div class="headerSection">
        <h2>Jasa Kami</h2>
      </div>

      <section class="splide" id="serviceSplide">
        <div class="splide__arrows">
          <button class="splide__arrow splide__arrow--prev">
            <div class="arrowRight">
              <svg
                width="7"
                height="11"
                viewBox="0 0 7 11"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M0 2.11803C0 1.37465 0.782313 0.891156 1.44721 1.22361L8.21114 4.60557C8.94819 4.9741 8.94819 6.0259 8.21115 6.39443L1.44722 9.77639C0.782315 10.1088 0 9.62535 0 8.88197V2.11803Z"
                  fill="#5150E3"></path>
              </svg>
            </div>
          </button>
          <button class="splide__arrow splide__arrow--next">
            <div class="arrowRight">
              <svg
                width="7"
                height="11"
                viewBox="0 0 7 11"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M0 2.11803C0 1.37465 0.782313 0.891156 1.44721 1.22361L8.21114 4.60557C8.94819 4.9741 8.94819 6.0259 8.21115 6.39443L1.44722 9.77639C0.782315 10.1088 0 9.62535 0 8.88197V2.11803Z"
                  fill="#5150E3"></path>
              </svg>
            </div>
          </button>
        </div>

        <div class="splide__track">
          <ul class="splide__list">
            <li class="splide__slide">
              <ServiceCard
                imageSrc="/image7.png"
                title="Video Editing"
                description1="Short-form video bukan sekadar potong-tempel. Butuh ritme, emosi, dan visual yang bikin scroll jadi stop."
                description2="Kami bantu kamu edit video pendek yang engaging, nempel di kepala, dan pastinya siap tampil di FYP."
                buttonHref="https://api.whatsapp.com/send?phone=6283876317913&text=Halo%20admin%20Ekido%2C%20aku%20mau%20tanya%20jasa%20*Video%20Editing*.%20Boleh%20cek%20pricelistnya%3F%20Berikut%20akunku%3A%0A%0A1.%E2%81%A0%20%E2%81%A0Nama%3A%0A2.%E2%81%A0%20%E2%81%A0Konten%20untuk%20akun%3A%20%40"
              />
            </li>
            <li class="splide__slide">
              <ServiceCard
                imageSrc="/image6.png"
                title="Content Plan"
                description1="Gak usah khawatir kontenmu gak otentikâ€”kita pastikan tetap sesuai gayamu!"
                description2="Jasa Content Plan dari Ekido bantu kamu bikin ide konten yang relevan, unik, dan cocok dengan niche kamu."
                buttonHref="https://api.whatsapp.com/send?phone=6283876317913&text=Halo%20admin%20Ekido%2C%20aku%20mau%20tanya%20jasa%20*Content%20Plan*.%20Boleh%20cek%20pricelistnya%3F%20Berikut%20akunku%3A%0A%0A1.%E2%81%A0%20%E2%81%A0Nama%3A%0A2.%E2%81%A0%20%E2%81%A0Konten%20untuk%20akun%3A%20%40"
              />
            </li>
            <li class="splide__slide">
              <ServiceCard
                imageSrc="/image5.png"
                title="Scriptwriting"
                description1="Bikin konten itu gampang. Tapi bikin yang nempel di kepala? Butuh skrip yang kuat."
                description2="Di Ekido, kami bantu kamu menulis skrip video pendek yang hooking, engaging, dan tetap sesuai gaya kamu."
                buttonHref="https://api.whatsapp.com/send?phone=6283876317913&text=Halo%20admin%20Ekido%2C%20aku%20mau%20tanya%20jasa%20*Scriptwriting*.%20Boleh%20cek%20pricelistnya%3F%20Berikut%20akunku%3A%0A%0A1.%E2%81%A0%20%E2%81%A0Nama%3A%0A2.%E2%81%A0%20%E2%81%A0Konten%20untuk%20akun%3A%20%40"
              />
            </li>
            <li class="splide__slide">
              <ServiceCard
                imageSrc="/image4.png"
                title="Visual Design"
                description1="Desain yang estetik, komunikatif, dan tetap sesuai sama identitas kamu."
                description2="âœ… Desain IG Feed âœ… Thumbnail/Cover âœ… Materi promosi digital (flyer, banner, katalog, poster, infografik)"
                buttonHref="https://api.whatsapp.com/send/?phone=6283876317913&text=Halo+admin+Ekido%2C+aku+mau+tanya+jasa+%2AVisual+Design%2A.+Boleh+cek+pricelistnya%3F+Berikut+akunku%3A+%0A1.%E2%81%A0+%E2%81%A0Nama%3A%0A2.%E2%81%A0+%E2%81%A0Konten+untuk+akun%3A+%40%0A3.+Referensi+gaya+design%0A4.+Kebutuhan+%28Design+Instagram+Feed+%2F+Poster+%2F+Infografis%2F+Banner%2F+kebutuhan+lainnya%29&type=phone_number&app_absent=0"
              />
            </li>
            <li class="splide__slide">
              <ServiceCard
                imageSrc="/image3.png"
                title="Talent"
                description1="Mau ngonten...tapi kamu gak nyaman di depan kamera? Tenangâ€”biar tim talent kami yang bantu buatkan konten."
                description2="ðŸ¤© Video Talent ðŸŽ¤ Voice Talent ðŸ¤– AI Video/Voice Talent"
                buttonHref="https://api.whatsapp.com/send/?phone=6283876317913&text=Halo+admin+Ekido%2C+aku+mau+tanya+jasa+%2ATalent%2A.+Boleh+cek%0Apricelistnya%3F+Berikut+akunku%3A+%0A1.%E2%81%A0+%E2%81%A0Nama%3A%0A2.%E2%81%A0+%E2%81%A0Konten+untuk+akun%3A+%40%0A3.+Kebutuhan+%28Talent+Video+%2F+Talent+Voice+%2F+AI+Talent%29&type=phone_number&app_absent=0"
              />
            </li>
            <li class="splide__slide">
              <ServiceCard
                imageSrc="/image2.png"
                title="Socmed Manager"
                description1="Desain yang estetik, komunikatif, dan tetap sesuai sama identitas kamu."
                description2="Jasa Full Managerial Akun Sosial Media, memastikan akun-mu/bisnis-mu bertumbuh."
                buttonHref="https://api.whatsapp.com/send/?phone=6283876317913&text=Halo+admin+Ekido%2C+aku+mau+tanya+jasa+%2ASosmed+Manager%2A.+Boleh+cek+pricelistnya%3F+Berikut+akunku%3A+%0A1.%E2%81%A0+%E2%81%A0Nama%3A%0A2.%E2%81%A0+%E2%81%A0Konten+untuk+akun%3A+%40%0A3.+Kebutuhan+Jasa+%28Full+Social+Media+Handling+%2F+Video+dan+Visual+Design+saja++--+ceritakan+kebutuhan+mu%21%29&type=phone_number&app_absent=0"
              />
            </li>
            <li class="splide__slide">
              <ServiceCard
                imageSrc="/image1.png"
                title="Jasa Lainnya"
                description1="Belum menemukan yang kamu butuhkan? Ekido juga menangani kebutuhan lainnya by request:"
                description2="âœ… Offline Shooting âœ… AI Studio âœ… Branding "
                buttonColor="blue"
                buttonText="Mulai Konsultasi"
                buttonHref="https://api.whatsapp.com/send/?phone=6283876317913&text=Halo+admin+Ekido%2C+aku+ada+kebutuhan+lain+seputar+sosial+media%2C+apakah+boleh+kita+diskusi%3F+%0A1.%E2%81%A0+%E2%81%A0Nama%3A%0A2.%E2%81%A0+%E2%81%A0Konten+untuk+akun%3A+%40%0A3.+Kebutuhan+%28Social+Media+Handling+%2F+Partnership+%2F+Kerjasama+dengan+Ekido+%2F+Butuh+alokasi+projek+yang+besar+--+ceritakan+kebutuhan+mu%21%29&type=phone_number&app_absent=0"
              />
            </li>
          </ul>
        </div>
      </section>

      <div class="footerSection">
        <p>Dipercaya oleh 250+ influencer dan 75+ brand di Indonesia:</p>
        <div class="brandsContainer">
          <div class="brandsSlide">
            <img src="/pertamina.png" alt="brand-1" />
            <img src="/alphaivf.png" alt="brand-2" />
            <img src="/ddpillow.png" alt="brand-3" />
            <img src="/xlaxiata.png" alt="brand-4" />
            <img src="/seefluencer.png" alt="brand-5" />
            <img src="/danone.png" alt="brand-6" />
            <!-- Duplicate for seamless loop -->
            <img src="/pertamina.png" alt="brand-1" />
            <img src="/alphaivf.png" alt="brand-2" />
            <img src="/ddpillow.png" alt="brand-3" />
            <img src="/xlaxiata.png" alt="brand-4" />
            <img src="/seefluencer.png" alt="brand-5" />
            <img src="/danone.png" alt="brand-6" />
          </div>
        </div>
      </div>
      <img src="/asset2.svg" alt="asset2" class="asset2alt" />
      <img src="/asset3.svg" alt="asset3" class="asset3" />
      <img src="/asset4.svg" alt="asset4" class="asset4" />
    </div>
  </div>
</div>

<script>
  import Splide from "@splidejs/splide";

  const SELECTORS = {
    SLIDER: "#serviceSlider",
    PREV_BTN: "#prevServiceBtn",
    NEXT_BTN: "#nextServiceBtn",
    INDICATOR: ".indicator",
    SLIDE: ".serviceSlide",
    SPLIDE: "#serviceSplide",
  };
  const CLASSES = { ACTIVE: "active" };
  const AUTO_INTERVAL_MS = 10_000;

  document.addEventListener("DOMContentLoaded", () => {
    initServiceSlider();
    initSplide();
  });

  function initServiceSlider() {
    const slider = document.querySelector(SELECTORS.SLIDER);
    const prevBtn = document.querySelector(SELECTORS.PREV_BTN);
    const nextBtn = document.querySelector(SELECTORS.NEXT_BTN);
    const indicators = Array.from(
      document.querySelectorAll(SELECTORS.INDICATOR)
    );
    const slides = Array.from(document.querySelectorAll(SELECTORS.SLIDE));

    if (!slider || !prevBtn || !nextBtn || indicators.length === 0) return;

    let currentIndex = 0;
    let autoSlideTimer: ReturnType<typeof setInterval> | null = null;

    indicators.forEach((dot, i) => {
      (dot as HTMLElement).setAttribute("data-index", i.toString());
    });

    function goToSlide(index: number) {
      currentIndex = (index + indicators.length) % indicators.length;
      if (slider instanceof HTMLElement) {
        slider.style.transform = `translateX(-${currentIndex * 100}%)`;
      }
      updateIndicators();
    }

    function updateIndicators() {
      indicators.forEach((dot, i) =>
        dot.classList.toggle(CLASSES.ACTIVE, i === currentIndex)
      );
    }

    function startAutoSlide() {
      stopAutoSlide();
      autoSlideTimer = setInterval(
        () => goToSlide(currentIndex + 1),
        AUTO_INTERVAL_MS
      );
    }

    function stopAutoSlide() {
      if (autoSlideTimer) clearInterval(autoSlideTimer);
    }

    function adjustSlideWidths() {
      slides.forEach((slide) => {
        (slide as HTMLElement).style.minWidth = "100%";
      });
    }

    prevBtn.addEventListener("click", () => goToSlide(currentIndex - 1));
    nextBtn.addEventListener("click", () => goToSlide(currentIndex + 1));

    indicators.forEach((dot) =>
      dot.addEventListener("click", () =>
        goToSlide(Number((dot as HTMLElement).getAttribute("data-index")))
      )
    );

    slider.addEventListener("mouseenter", stopAutoSlide);
    slider.addEventListener("mouseleave", startAutoSlide);

    window.addEventListener("resize", () => {
      adjustSlideWidths();
      goToSlide(currentIndex);
    });

    adjustSlideWidths();
    goToSlide(0);
    startAutoSlide();
  }

  function initSplide() {
    const splideEl = document.querySelector(SELECTORS.SPLIDE);
    if (!splideEl) return;
    new Splide(SELECTORS.SPLIDE, {
      autoplay: true,
      type: "loop",
      gap: 16,
    }).mount();
  }
</script>
